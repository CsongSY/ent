// Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.
// This source code is licensed under the Apache 2.0 license found
// in the LICENSE file in the root directory of this source tree.

// Code generated by entc, DO NOT EDIT.

package hook

import (
	"context"
	"fmt"

	"github.com/facebookincubator/ent/examples/edgeindex/ent"
)

type CityFunc func(context.Context, *ent.CityMutation) (ent.Value, error)

func (f CityFunc) Mutate(ctx context.Context, m ent.Mutation) (ent.Value, error) {
	mv, ok := m.(*ent.CityMutation)
	if !ok {
		return nil, fmt.Errorf("unexpected mutation type %T. expect *ent.CityMutation", m)
	}
	return f(ctx, mv)
}

type StreetFunc func(context.Context, *ent.StreetMutation) (ent.Value, error)

func (f StreetFunc) Mutate(ctx context.Context, m ent.Mutation) (ent.Value, error) {
	mv, ok := m.(*ent.StreetMutation)
	if !ok {
		return nil, fmt.Errorf("unexpected mutation type %T. expect *ent.StreetMutation", m)
	}
	return f(ctx, mv)
}

func On(hk ent.Hook, op ent.Op) ent.Hook {
	return func(next ent.Mutator) ent.Mutator {
		return ent.MutateFunc(func(ctx context.Context, m ent.Mutation) (ent.Value, error) {
			if m.Op().Is(op) {
				return hk(next).Mutate(ctx, m)
			}
			return next.Mutate(ctx, m)
		})
	}
}
